# Fourier Oracle: 2D vs 3D 컴포넌트 비교 분석

이 문서는 `FourierCanvas2D.jsx`와 `FourierCanvas3D.jsx`의 구현 차이점을 분석하여 향후 일관성 유지 및 기능 확장을 위한 가이드를 제공합니다.

## 1. 개요 및 렌더링 엔진

| 항목            | 2D 컴포넌트                           | 3D 컴포넌트                |
| :-------------- | :------------------------------------ | :------------------------- |
| **파일명**      | `FourierCanvas2D.jsx`                 | `FourierCanvas3D.jsx`      |
| **렌더링 기술** | HTML5 Canvas 2D API                   | Three.js (WebGL)           |
| **복잡도**      | 상대적으로 높음 (오디오, 그리기 포함) | 중간 (3D 수학 모델링 집중) |

## 2. 구조적 차이점

| 특징                | FourierCanvas2D (2D)                                                | FourierCanvas3D (3D)                               |
| :------------------ | :------------------------------------------------------------------ | :------------------------------------------------- |
| **인스턴스 관리**   | **멀티 인스턴스**: 배열(`instancesRef`)로 관리. 최대 6개 동시 실행. | **싱글 인스턴스**: 현재 하나의 패턴만 렌더링 가능. |
| **애니메이션 루프** | `requestAnimationFrame` + Canvas 클리어/다시 그리기.                | Three.js 전용 `animate` 루프 + `renderer.render`.  |
| **시작 위치**       | **랜덤 위치**: `Spatial Spread` 범위 내 랜덤 배치.                  | **중앙 고정**: 항상 (0,0,0) 좌표에서 시작.         |
| **상태 동기화**     | `globalSettingsRef`를 통해 렌더 루프와 상태 동기화.                 | `settingsRef`를 활용하여 렌더 루프와 동기화.       |

## 3. 설정값(Settings) 비교

2D와 3D의 사용자 경험 통일을 위해 핵심 설정값은 동기화되어 있습니다.

| 설정 항목            | 2D 범위 / 기본값      | 3D 범위 / 기본값          | 상태             |
| :------------------- | :-------------------- | :------------------------ | :--------------- |
| **Geometric Detail** | 1 ~ 500 (100)         | 1 ~ 256 (자동 설정)       | 유사             |
| **Flow Speed**       | 0.01 ~ 0.5 (0.08)     | 0.01 ~ 0.5 (0.08)         | **일치**         |
| **Persistence**      | 1 ~ 15 (2)            | 0.5 ~ 5 (2.0)             | 유사 (단위 차이) |
| **Path Weight**      | 0.5 ~ 5 (1.8)         | 1 ~ 5 (2)                 | **일치**         |
| **Shape Scale**      | 20% ~ 150% (1.26)     | 50% ~ 200% (1.0)          | 유사             |
| **Sequence Delay**   | 0s ~ 5s (1.2)         | 0s ~ 5s (0.0)             | 유사             |
| **Seed Time**        | 0.5s ~ 30s (1.3)      | 0.5s ~ 10s (1.3)          | **일치**         |
| **Audio/Camera**     | 오디오 관련 설정 존재 | 카메라 회전, 줌 설정 존재 | 특화 기능        |

## 4. 기능적 차이 및 특징

### FourierCanvas2D 전용 기능

- **자유 드로잉**: 사용자가 직접 마우스/터치로 경로를 그릴 수 있음.
- **오디오 합성**: 각 인스턴스의 하모닉스를 소리로 변환 (Web Audio API).
- **자동 리셋**: 3분간 입력이 없으면 자동 초기화.

### FourierCanvas3D 전용 기능

- **3D 패턴**: 트레포일 매듭(Trefoil Knot), 토러스 매듭(Torus Knot) 등 공간 곡선 지원.
- **카메라 제어**: 궤도 회전(Orbit) 및 확대/축소(Zoom %) 기능.
- **3D 궤적**: Z축 깊이 정보를 포함한 입체적인 Fourier 결과물.

## 5. 향후 개선 방향 (Action Items)

1. **3D 멀티 인스턴스화**: 2D처럼 여러 시드를 동시에 생성하고 화면에 배치할 수 있도록 `instancesRef` 구조 도입.
2. **시작점 랜덤화**: 3D 패턴 생성 시 (0,0,0)이 아닌 공간상 랜덤 위치에서 시작하도록 수정 (2D의 `Spatial Spread` 반영).
3. **리셋 로직 통일**: 3D 리셋 시에도 단순히 화면을 지우는 것을 넘어 인스턴스 배열을 비우는 2D 방식으로 전환.

---

> [!NOTE]
> 이 문서는 2026년 1월 10일 기준 최신 코드를 바탕으로 작성되었습니다.
